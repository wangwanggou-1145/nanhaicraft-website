const { parseFontAwesomeIcon } = require('./icon-parser');

function postNoteLarge(args, content) {
  if (args.length === 0) {
    args.push("default", "Warning");
  }

  let icon = "";
  let title = "";
  
  // Extract color from args[0]
  const color = args[0];
  
  // Process all arguments after color to build icon and title
  const remainingArgs = args.slice(1);
  
  // Parse FontAwesome icon from remaining arguments
  const { icon: parsedIcon } = parseFontAwesomeIcon(remainingArgs, "notel-icon");
  icon = parsedIcon;
  
  // Join all remaining args as the title
  title = remainingArgs.join(" ");
  
  // If no title was provided, set a default
  if (!title) {
    title = "Note";
  }

  return `
  <div class="note-large ${color}">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      ${icon}${hexo.render.renderSync({
        text: title,
        engine: "markdown",
      })}
    </div>
    <div class="notel-content markdown-body">
      ${hexo.render.renderSync({
        text: content,
        engine: "markdown",
      })}
    </div>
  </div>`;
}

hexo.extend.tag.register("noteL", postNoteLarge, { ends: true });
hexo.extend.tag.register("notel", postNoteLarge, { ends: true });
hexo.extend.tag.register("notelarge", postNoteLarge, { ends: true });
hexo.extend.tag.register("notel-large", postNoteLarge, { ends: true });
hexo.extend.tag.register("notes-large", postNoteLarge, { ends: true });
hexo.extend.tag.register("subwarning", postNoteLarge, { ends: true });