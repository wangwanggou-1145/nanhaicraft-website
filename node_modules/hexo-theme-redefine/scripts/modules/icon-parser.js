/**
 * Parse FontAwesome icon arguments from an array of arguments
 * @param {string[]} args - The arguments to parse
 * @param {string} iconClassPrefix - The prefix for the icon class (e.g., "note-icon" or "notel-icon")
 * @returns {Object} - An object containing the icon HTML and the remaining arguments
 */
function parseFontAwesomeIcon(args, iconClassPrefix) {
  let icon = "";
  const remainingArgs = [...args]; // Copy args array
  
  // Find all fa- prefixed arguments
  const faArgs = [];
  const faIndices = [];
  
  remainingArgs.forEach((arg, index) => {
    if (arg && arg.startsWith('fa-')) {
      faArgs.push(arg);
      faIndices.push(index);
    }
  });
  
  // Handle FontAwesome icons based on how many fa- args we found
  if (faArgs.length === 2) {
    // Two fa- args: first is style, second is icon
    icon = `<i class="${iconClassPrefix} ${faArgs[0]} ${faArgs[1]}"></i>`;
    
    // Remove both FA args (remove higher index first to preserve positions)
    remainingArgs.splice(faIndices[1], 1);
    remainingArgs.splice(faIndices[0], 1);
  } else if (faArgs.length === 1) {
    // One fa- arg: it's the icon, default to fa-solid
    icon = `<i class="${iconClassPrefix} fa-solid ${faArgs[0]}"></i>`;
    
    // Remove the FA arg
    remainingArgs.splice(faIndices[0], 1);
  }
  
  return { icon, remainingArgs };
}

module.exports = { parseFontAwesomeIcon };